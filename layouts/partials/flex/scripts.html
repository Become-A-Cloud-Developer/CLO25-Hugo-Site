<script src="{{"js/jquery-2.x.min.js" | relURL}}"></script>
<script type="text/javascript">
    {{if hugo.IsMultilingual}}
        var baseurl = "{{.Site.BaseURL}}{{.Site.LanguagePrefix}}";
    {{else}}
        var baseurl = "{{.Site.BaseURL}}";
    {{end}}
</script>
<script src="{{"js/clipboard.min.js" | relURL}}"></script>
<script src="{{"js/featherlight.min.js" | relURL}}"></script>
{{if eq .Site.Params.highlightClientSide true}}
<script src="{{"js/highlight.pack.js" | relURL}}"></script>
<script>hljs.initHighlightingOnLoad();</script>
{{end}}
<script type="text/javascript" src="{{"js/lunr.min.js" | relURL}}"></script>
<script type="text/javascript" src="{{"js/auto-complete.js" | relURL}}"></script>
<script type="text/javascript" src="{{"js/search.js" | relURL}}"></script>
<script src="{{(printf "theme-%s/script.js" (.Site.Params.themeStyle| default "flex")) | relURL}}"></script>

<!-- Override menu collapse behavior to keep active section expanded -->
<script type="text/javascript">
jQuery(document).ready(function() {
    // Get the current page URL
    var currentUrl = window.location.href;

    // Find the current page in the menu and mark it and its ancestors
    jQuery('#sidebar li[data-nav-id]').each(function() {
        var navId = jQuery(this).attr('data-nav-id');
        // Check if this is the current page or an ancestor of it
        if (currentUrl.indexOf(navId) === 0 || navId.indexOf(currentUrl) === 0) {
            jQuery(this).addClass('active-path');
        }
    });

    // Also mark all ancestors of items that contain the current page
    jQuery('#sidebar li.active-path').parents('li[data-nav-id]').addClass('active-path');

    // Remove the default click handler and add our custom one
    jQuery('#sidebar .category-icon').off('click').on('click', function() {
        var menuItem = jQuery(this).parent().parent();

        // If this section contains the active page, don't allow collapse
        if (menuItem.hasClass('active-path')) {
            return false;
        }

        // Otherwise, toggle as normal
        jQuery(this).toggleClass("fa-angle-down fa-angle-right");
        menuItem.children('ul').toggle();
        return false;
    });
});
</script>

<!-- Mermaid diagram support -->
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<script>
    mermaid.initialize({ startOnLoad: true });
</script>